!function(t){"use strict";function e(){t(this).removeClass("range-slider"),t(this).data("range-slider",void 0),t(this).init.prototype.range=void 0,t("*",this).remove()}function i(){t(this).rangeSlider("destroy"),t(this).rangeSlider()}t.fn.rangeSlider=function(n){t(this).each(function(){switch(n){case"destroy":return e.call(this);case"restart":return i.call(this);case"":return i.call(this)}t(this).hasClass("range-slider")&&t(this).rangeSlider("destroy"),t(this).trigger("range-slider::init::before"),t(this).addClass("range-slider");var r=t(this).attr("id");r&&(t('<input type="hidden" name="'+r+'-max" data-range-bind="'+r+'" data-range-value="max">').appendTo(this),t('<input type="hidden" name="'+r+'-min" data-range-bind="'+r+'" data-range-value="min">').appendTo(this));var s=t(this).attr("data-infinity"),d=t(this).attr("data-type");"vertical"!=d&&(d="horizontal",t(this).attr("data-type","horizontal"));var o=Number(t(this).attr("data-step"));isNaN(o)&&(o=1);var l=Number(t(this).attr("data-min"));isNaN(l)&&(l=0);var p=Number(t(this).attr("data-max"));(isNaN(p)||l>=p)&&(p=l+100);var h=p-l,m=Number(t(this).attr("data-min-default"));(isNaN(m)||m<l)&&(m=0);var u=Number(t(this).attr("data-max-default"));(isNaN(u)||p<u)&&(u=h),t(this).data("range-slider",{min:l,max:p,min_default:m,max_default:u,unit:h,step:o,type:d,margin:m,depth:p}),t(this).init.prototype.range=function(e,i,a){var n=e,r=i,s=this.data("range-slider"),d={type:"unit"};t.extend(d,a),d.from_type=d.type,d.to_type=d.type;var o="vertical"==s.type?"height":"width";null!==n&&n!==!1&&void 0!==n||(n=this.find(".dynamic-margin")[o](),"vertical"==s.type&&(n=this[o]()-(n+this.find(".dynamic-range")[o]())),d.from_type="pixel"),null!==r&&r!==!1&&void 0!==r||(r=this.find(".dynamic-margin")[o]()+this.find(".dynamic-range")[o](),"vertical"==s.type&&(r=this[o]()-this.find(".dynamic-margin")[o]()),d.to_type="pixel");var l=this[o]();"pixel"==d.from_type?n=n*s.unit/l:"percent"==d.from_type?n=n*s.unit/100:"ziro_unit"==d.from_type?n-=s.min:"step_plus"==d.from_type&&(n=n*s.step+s.from),"pixel"==d.to_type?r=r*s.unit/l:"percent"==d.to_type?r=r*s.unit/100:"ziro_unit"==d.to_type?r-=s.min:"step_plus"==d.to_type&&(r=r*s.step+s.to);var p=Math.round(n/s.step)*s.step,h=Math.round(r/s.step)*s.step;h<p&&(s.to==h?h=p:p=h),h>s.unit&&(h=s.unit),p>s.unit&&(p=s.unit),h<0&&(h=0),p<0&&(p=0);var m=this.attr("id");m&&t('[data-range-bind="'+m+'"]').each(function(){var e=t(this).attr("data-range-value");"max"==e?t(this).val(s.min+h):"min"==e&&t(this).val(s.min+p)}),n=100*p/s.unit,r=100*h/s.unit;var u=r-n;s.to==h&&s.from==p||(this.data("range-slider").from=p,this.data("range-slider").to=h,this.trigger("range-slider::change::before",[s.min+p,s.min+h]),"vertical"==s.type?this.find(".dynamic-margin").css(o,100-r+"%"):this.find(".dynamic-margin").css(o,n+"%"),this.find(".dynamic-range").css(o,u+"%"),this.trigger("range-slider::change",[s.min+p,s.min+h]))};var g=t("<div class='dynamic-margin'></div>"),c=t("<div class='dynamic-range'></div>");"max"==s?a.call(this,"min").appendTo(c):"min"==s?a.call(this,"max").appendTo(c):(a.call(this,"max").appendTo(c),a.call(this,"min").appendTo(c)),g.hide(),c.hide(),g.appendTo(this),c.appendTo(this),t(this).range(m,u),g.show(),c.show(),t(this).trigger("range-slider::init::after")})};var a=function(e){var i=t(this).data("range-slider"),a=this,n=t("<div class='"+e+"'></div>");return t(this).trigger("range-slider::selection",[n,e]),n.attr("tabindex","0"),n.unbind("mousedown.range-slider"),n.bind("mousedown.range-slider",function(){return t(document).unbind("mousemove.range-slider"),t(document).bind("mousemove.range-slider",function(n){var r="vertical"==i.type?n.pageY:n.pageX,s="vertical"==i.type?t(a).offset().top:t(a).offset().left,d=r-s;d="vertical"==i.type?t(a).height()-d:d,"max"==e?t(a).range(null,d,{type:"pixel"}):t(a).range(d,null,{type:"pixel"})}).bind("mouseup.range-slider",function(){t(document).unbind("mouseup.range-slider"),t(document).unbind("mousemove.range-slider")}),!1}).bind("mouseup",function(){t(document).unbind("mousemove.range-slider")}).bind("keydown.range-slider",function(e){var i,a;return i=1,a=null,t(this).is(".max")&&(i=null,a=1),38==e.keyCode||39==e.keyCode?(t(this).parents(".range-slider").range(i,a,{type:"step_plus"}),!1):37==e.keyCode||40==e.keyCode?(t(this).parents(".range-slider").range(i*-1,a*-1,{type:"step_plus"}),!1):void 0}),n}}(jQuery);